<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Opravovanie testov - EduAI</title>
    <link rel="stylesheet" href="test-grading.css">
</head>
<body>
    <div class="dashboard">
        <header class="header">
            <a href="teacher-dashboard.html" class="back-link">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
                Sp√§≈•
            </a>
            <h1 class="header-title">Opravovanie testov</h1>
            <div class="step-indicator">
                <span class="current-step">Krok <span id="current-step-num">1</span>/6</span>
            </div>
        </header>
        
        <main class="main-content">
            <!-- Step 1: Dashboard testov -->
            <div class="step active" id="step-1">
                <div class="step-header">
                    <h2 class="step-title">Va≈°e testy</h2>
                    <p class="step-subtitle">Vyberte existuj√∫ci test alebo vytvorte nov√Ω</p>
                </div>
                
                <div class="tests-grid">
                    <div class="test-card existing">
                        <div class="test-icon">üìù</div>
                        <h3>Matematika - Rovnice</h3>
                        <p class="test-meta">5 √∫loh ‚Ä¢ 20 bodov ‚Ä¢ 3 opraven√©</p>
                        <button class="secondary-btn">Otvori≈•</button>
                    </div>
                    
                    <div class="test-card existing">
                        <div class="test-icon">üìê</div>
                        <h3>Geometria - Trojuholn√≠ky</h3>
                        <p class="test-meta">7 √∫loh ‚Ä¢ 30 bodov ‚Ä¢ 0 opraven√©</p>
                        <button class="secondary-btn">Otvori≈•</button>
                    </div>
                    
                    <div class="test-card new" onclick="nextStep()">
                        <div class="plus-icon">+</div>
                        <h3>Vytvori≈• nov√Ω test</h3>
                        <p class="test-meta">Nahrajte pr√°zdny test a zaƒçnite</p>
                    </div>
                </div>
            </div>

            <!-- Step 2: Upload pr√°zdneho testu -->
            <div class="step" id="step-2">
                <div class="step-header">
                    <h2 class="step-title">Nahrajte pr√°zdny test</h2>
                    <p class="step-subtitle">AI automaticky rozpozn√° √∫lohy a ich ≈°trukt√∫ru</p>
                </div>
                
                <div class="upload-area" onclick="triggerUpload()">
                    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="17 8 12 3 7 8"/>
                        <line x1="12" y1="3" x2="12" y2="15"/>
                    </svg>
                    <h3>Kliknite alebo pretiahnite s√∫bor</h3>
                    <p>PDF, JPG, PNG ‚Ä¢ Max 10 MB</p>
                    <input type="file" id="file-input" style="display: none;" accept=".pdf,.jpg,.jpeg,.png">
                </div>
                
                <div class="example-preview hidden" id="test-preview">
                    <div class="preview-header">
                        <span class="file-name">test_matematika.pdf</span>
                        <button class="link-btn" onclick="removeFile()">Odstr√°ni≈•</button>
                    </div>
                    <div class="preview-image">
                        <div class="mock-test">
                            <div class="mock-header">Test z matematiky - Kvadratick√© rovnice</div>
                            <div class="mock-question">1. Vyrie≈°te rovnicu: x¬≤ + 5x + 6 = 0</div>
                            <div class="mock-space"></div>
                            <div class="mock-question">2. Vypoƒç√≠tajte diskriminant rovnice: 2x¬≤ - 3x + 1 = 0</div>
                            <div class="mock-space"></div>
                            <div class="mock-question">3. Slovn√° √∫loha: Obdƒ∫≈ænik m√° obvod 24 cm...</div>
                            <div class="mock-space-large"></div>
                        </div>
                    </div>
                    <button class="primary-btn" onclick="nextStep()">Pokraƒçova≈• na nastavenie</button>
                </div>
            </div>

            <!-- Step 3: Konfigur√°cia bodov a rubric -->
            <div class="step" id="step-3">
                <div class="step-header">
                    <h2 class="step-title">Nastavenie hodnotenia</h2>
                    <p class="step-subtitle">Definujte body za √∫lohy a krit√©ri√° hodnotenia</p>
                </div>
                
                <div class="config-container">
                    <div class="config-sidebar">
                        <div class="test-info-card">
                            <div class="info-icon">üìù</div>
                            <h3>Test z matematiky</h3>
                            <p class="test-topic">Kvadratick√© rovnice</p>
                            <div class="test-stats">
                                <div class="stat-item">
                                    <span class="stat-label">√ölohy</span>
                                    <span class="stat-value">3</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Body spolu</span>
                                    <span class="stat-value" id="total-points">20</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="quick-tips">
                            <h4>üí° Tipy</h4>
                            <ul>
                                <li>Buƒète ≈°pecifick√Ω v krit√©ri√°ch</li>
                                <li>Rozdeƒæte body podƒæa n√°roƒçnosti</li>
                                <li>Definujte ƒçiastkov√© hodnotenie</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="config-main">
                        <div class="questions-config-new">
                            <div class="question-card">
                                <div class="question-card-header">
                                    <div class="question-badge blue">√öloha 1</div>
                                    <div class="points-config">
                                        <input type="number" value="5" class="points-input-new" onchange="updateTotal()">
                                        <span class="points-label">bodov</span>
                                    </div>
                                </div>
                                
                                <div class="question-preview">
                                    <p class="question-text">Vyrie≈°te rovnicu: x¬≤ + 5x + 6 = 0</p>
                                </div>
                                
                                <div class="rubric-section">
                                    <label class="rubric-label">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                                        </svg>
                                        Krit√©ri√° hodnotenia
                                    </label>
                                    <div class="rubric-items">
                                        <div class="rubric-item">
                                            <input type="text" class="rubric-criterion" value="Spr√°vny v√Ωpoƒçet diskriminantu">
                                            <input type="number" class="rubric-points" value="2">
                                        </div>
                                        <div class="rubric-item">
                                            <input type="text" class="rubric-criterion" value="Spr√°vne korene x‚ÇÅ a x‚ÇÇ">
                                            <input type="number" class="rubric-points" value="2">
                                        </div>
                                        <div class="rubric-item">
                                            <input type="text" class="rubric-criterion" value="Spr√°vna sk√∫≈°ka">
                                            <input type="number" class="rubric-points" value="1">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="question-card">
                                <div class="question-card-header">
                                    <div class="question-badge dark">√öloha 2</div>
                                    <div class="points-config">
                                        <input type="number" value="7" class="points-input-new" onchange="updateTotal()">
                                        <span class="points-label">bodov</span>
                                    </div>
                                </div>
                                
                                <div class="question-preview">
                                    <p class="question-text">Vypoƒç√≠tajte diskriminant rovnice: 2x¬≤ - 3x + 1 = 0</p>
                                </div>
                                
                                <div class="rubric-section">
                                    <label class="rubric-label">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                                        </svg>
                                        Krit√©ri√° hodnotenia
                                    </label>
                                    <div class="rubric-items">
                                        <div class="rubric-item">
                                            <input type="text" class="rubric-criterion" value="Spr√°vna substit√∫cia">
                                            <input type="number" class="rubric-points" value="2">
                                        </div>
                                        <div class="rubric-item">
                                            <input type="text" class="rubric-criterion" value="V√Ωpoƒçet">
                                            <input type="number" class="rubric-points" value="3">
                                        </div>
                                        <div class="rubric-item">
                                            <input type="text" class="rubric-criterion" value="Spr√°vny v√Ωsledok">
                                            <input type="number" class="rubric-points" value="2">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="question-card">
                                <div class="question-card-header">
                                    <div class="question-badge blue">√öloha 3</div>
                                    <div class="points-config">
                                        <input type="number" value="8" class="points-input-new" onchange="updateTotal()">
                                        <span class="points-label">bodov</span>
                                    </div>
                                </div>
                                
                                <div class="question-preview">
                                    <p class="question-text">Slovn√° √∫loha: Obdƒ∫≈ænik m√° obvod 24 cm...</p>
                                </div>
                                
                                <div class="rubric-section">
                                    <label class="rubric-label">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                                        </svg>
                                        Krit√©ri√° hodnotenia
                                    </label>
                                    <div class="rubric-items">
                                        <div class="rubric-item">
                                            <input type="text" class="rubric-criterion" value="Spr√°vne zostavenie rovnice">
                                            <input type="number" class="rubric-points" value="3">
                                        </div>
                                        <div class="rubric-item">
                                            <input type="text" class="rubric-criterion" value="Rie≈°enie">
                                            <input type="number" class="rubric-points" value="3">
                                        </div>
                                        <div class="rubric-item">
                                            <input type="text" class="rubric-criterion" value="Odpoveƒè so spr√°vnou jednotkou">
                                            <input type="number" class="rubric-points" value="2">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <button class="primary-btn large" onclick="nextStep()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            Ulo≈æi≈• nastavenia
                        </button>
                    </div>
                </div>
            </div>

            <!-- Step 4: Upload ≈°tudentsk√Ωch testov -->
            <div class="step" id="step-4">
                <div class="step-header">
                    <h2 class="step-title">Nahrajte vyplnen√© testy</h2>
                    <p class="step-subtitle">Naskenujte alebo odfotografujte vypracovan√© testy ≈°tudentov</p>
                </div>
                
                <div class="student-upload-area">
                    <div class="upload-zone" onclick="triggerStudentUpload()">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                            <circle cx="8.5" cy="8.5" r="1.5"/>
                            <polyline points="21 15 16 10 5 21"/>
                        </svg>
                        <p>Prida≈• testy ≈°tudentov</p>
                        <input type="file" id="student-file-input" style="display: none;" accept=".pdf,.jpg,.jpeg,.png" multiple>
                    </div>
                    
                    <div class="uploaded-tests hidden" id="uploaded-tests">
                        <h3>Nahran√© testy (3)</h3>
                        <div class="uploaded-list">
                            <div class="uploaded-item">
                                <div class="upload-thumbnail">üìÑ</div>
                                <div class="upload-info">
                                    <span class="student-name">J√°n Nov√°k</span>
                                    <span class="upload-meta">test_student_1.jpg ‚Ä¢ 2.4 MB</span>
                                </div>
                                <span class="status-badge pending">ƒåak√°</span>
                            </div>
                            
                            <div class="uploaded-item">
                                <div class="upload-thumbnail">üìÑ</div>
                                <div class="upload-info">
                                    <span class="student-name">M√°ria Kov√°ƒçov√°</span>
                                    <span class="upload-meta">test_student_2.jpg ‚Ä¢ 1.8 MB</span>
                                </div>
                                <span class="status-badge pending">ƒåak√°</span>
                            </div>
                            
                            <div class="uploaded-item">
                                <div class="upload-thumbnail">üìÑ</div>
                                <div class="upload-info">
                                    <span class="student-name">Peter Hor√°k</span>
                                    <span class="upload-meta">test_student_3.jpg ‚Ä¢ 2.1 MB</span>
                                </div>
                                <span class="status-badge pending">ƒåak√°</span>
                            </div>
                        </div>
                        
                        <button class="primary-btn large" onclick="nextStep()">Spusti≈• AI hodnotenie (3 testy)</button>
                    </div>
                </div>
            </div>

            <!-- Step 5: AI vyhodnotenie -->
            <div class="step" id="step-5">
                <div class="step-header">
                    <h2 class="step-title">AI vyhodnocuje testy</h2>
                    <p class="step-subtitle">Automatick√© opravovanie a generovanie feedbacku</p>
                </div>
                
                <div class="grading-progress">
                    <div class="progress-items">
                        <div class="progress-item completed">
                            <div class="progress-icon">‚úì</div>
                            <div class="progress-text">
                                <strong>J√°n Nov√°k</strong>
                                <span>Vyhodnoten√© ‚Ä¢ 18/20 bodov</span>
                            </div>
                        </div>
                        
                        <div class="progress-item active">
                            <div class="progress-icon spinner-small"></div>
                            <div class="progress-text">
                                <strong>M√°ria Kov√°ƒçov√°</strong>
                                <span>Vyhodnocujem...</span>
                            </div>
                        </div>
                        
                        <div class="progress-item">
                            <div class="progress-icon">‚è≥</div>
                            <div class="progress-text">
                                <strong>Peter Hor√°k</strong>
                                <span>ƒåak√° v rade</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="overall-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                        <p class="progress-label">Dokonƒçen√©: <span id="progress-percent">33%</span></p>
                    </div>
                </div>
            </div>

            <!-- Step 6: V√Ωsledky -->
            <div class="step" id="step-6">
                <div class="step-header">
                    <h2 class="step-title">V√Ωsledky hodnotenia</h2>
                    <p class="step-subtitle">V≈°etky testy boli √∫spe≈°ne vyhodnoten√©</p>
                </div>
                
                <div class="results-container">
                    <div class="results-summary">
                        <div class="summary-card">
                            <div class="summary-number">3</div>
                            <div class="summary-label">Opraven√© testy</div>
                        </div>
                        <div class="summary-card">
                            <div class="summary-number">17.3</div>
                            <div class="summary-label">Priemern√Ω poƒçet bodov</div>
                        </div>
                        <div class="summary-card">
                            <div class="summary-number">87%</div>
                            <div class="summary-label">Priemern√° √∫spe≈°nos≈•</div>
                        </div>
                    </div>
                    
                    <div class="results-list">
                        <div class="result-card" onclick="showDetail(1)">
                            <div class="result-header">
                                <div class="student-avatar">JN</div>
                                <div class="student-details">
                                    <h3>J√°n Nov√°k</h3>
                                    <p class="result-meta">Vyhodnoten√© pred 2 min√∫tami</p>
                                </div>
                                <div class="result-score">
                                    <span class="score-big">18</span>/20
                                    <span class="score-percent">90%</span>
                                </div>
                            </div>
                            <div class="result-breakdown">
                                <div class="breakdown-item">
                                    <span>√öloha 1:</span>
                                    <span class="score-badge good">5/5</span>
                                </div>
                                <div class="breakdown-item">
                                    <span>√öloha 2:</span>
                                    <span class="score-badge medium">6/7</span>
                                </div>
                                <div class="breakdown-item">
                                    <span>√öloha 3:</span>
                                    <span class="score-badge medium">7/8</span>
                                </div>
                            </div>
                            <button class="link-btn">Zobrazi≈• detail a feedback ‚Üí</button>
                        </div>
                        
                        <div class="result-card" onclick="showDetail(2)">
                            <div class="result-header">
                                <div class="student-avatar">MK</div>
                                <div class="student-details">
                                    <h3>M√°ria Kov√°ƒçov√°</h3>
                                    <p class="result-meta">Vyhodnoten√© pred 1 min√∫tou</p>
                                </div>
                                <div class="result-score">
                                    <span class="score-big">19</span>/20
                                    <span class="score-percent">95%</span>
                                </div>
                            </div>
                            <div class="result-breakdown">
                                <div class="breakdown-item">
                                    <span>√öloha 1:</span>
                                    <span class="score-badge good">5/5</span>
                                </div>
                                <div class="breakdown-item">
                                    <span>√öloha 2:</span>
                                    <span class="score-badge good">7/7</span>
                                </div>
                                <div class="breakdown-item">
                                    <span>√öloha 3:</span>
                                    <span class="score-badge medium">7/8</span>
                                </div>
                            </div>
                            <button class="link-btn">Zobrazi≈• detail a feedback ‚Üí</button>
                        </div>
                        
                        <div class="result-card" onclick="showDetail(3)">
                            <div class="result-header">
                                <div class="student-avatar">PH</div>
                                <div class="student-details">
                                    <h3>Peter Hor√°k</h3>
                                    <p class="result-meta">Vyhodnoten√© pr√°ve teraz</p>
                                </div>
                                <div class="result-score">
                                    <span class="score-big">15</span>/20
                                    <span class="score-percent">75%</span>
                                </div>
                            </div>
                            <div class="result-breakdown">
                                <div class="breakdown-item">
                                    <span>√öloha 1:</span>
                                    <span class="score-badge medium">4/5</span>
                                </div>
                                <div class="breakdown-item">
                                    <span>√öloha 2:</span>
                                    <span class="score-badge low">4/7</span>
                                </div>
                                <div class="breakdown-item">
                                    <span>√öloha 3:</span>
                                    <span class="score-badge good">7/8</span>
                                </div>
                            </div>
                            <button class="link-btn">Zobrazi≈• detail a feedback ‚Üí</button>
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="secondary-btn">Exportova≈• v√Ωsledky</button>
                        <button class="secondary-btn">Odosla≈• ≈°tudentom</button>
                        <button class="primary-btn" onclick="resetDemo()">Vyhodnoti≈• ƒèal≈°ie testy</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="test-grading.js"></script>
</body>
</html>

